<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Valorant Score Tracker</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#00ff99" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #111;
      --text: #eee;
      --primary: #00ff99;
      --border: #444;
      --input-bg: #222;
    }
    body {
      font-family: Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    h1 {
      color: var(--primary);
    }
    table {
      border-collapse: collapse;
      width: 100%;
      max-width: 600px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 8px;
      text-align: center;
    }
    input, select {
      width: 80px;
      background: var(--input-bg);
      color: var(--text);
      border: 1px solid var(--border);
      padding: 4px;
    }
    button {
      padding: 6px 12px;
      margin: 5px;
      background: var(--primary);
      border: none;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      border-radius: 6px;
    }
    #chartContainer {
      display: none;
      width: 90%;
      max-width: 600px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>Valorant Score Tracker</h1>
  <div class="actions">
    <input id="matchName" placeholder="Match Name" />
    <button onclick="saveMatch()">Save Match</button>
    <button onclick="confirmReset()">Reset</button>
    <select id="savedMatches" onchange="loadOrNewMatch()">
      <option value="">-- New Match --</option>
    </select>
    <button onclick="renameMatch()">Rename</button>
    <button onclick="deleteMatch()">Delete</button>
    <br><br>
    <label for="roundLimit">Rounds Played:</label>
    <select id="roundLimit" onchange="updateSummary()"></select>
    <button onclick="toggleChart()">View Graphs</button>
  </div>  <table>
    <thead>
      <tr>
        <th>Round</th>
        <th>Kills</th>
        <th>Assists</th>
        <th>Points</th>
        <th>Rating</th>
      </tr>
    </thead>
    <tbody id="rounds"></tbody>
  </table>
  <div class="result" id="summary"></div>
  <div id="chartContainer">
    <canvas id="roundChart"></canvas>
  </div>  <script>
    const maxRounds = 40;
    const tbody = document.getElementById("rounds");
    let roundChart;

    const ratingLevels = [
      "Bad", "Not Fine", "Fine", "Above Fine",
      "Strong", "Very Strong", "Great", "Very Great",
      "Elite", "Insane", "Ace ðŸ”¥"
    ];
    const ratingThresholds = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    function getRating(points) {
      for (let i = ratingThresholds.length - 1; i >= 0; i--) {
        if (points >= ratingThresholds[i]) return ratingLevels[i];
      }
      return "Not Played";
    }

    function updateSummary() {
      const limit = parseInt(document.getElementById("roundLimit").value);
      let totalKills = 0, totalAssists = 0, totalPoints = 0, countedRounds = 0;
      let killsData = [], assistsData = [], pointsData = [], labels = [];

      for (let i = 0; i < maxRounds; i++) {
        const row = document.getElementById(`row${i}`);
        if (i < limit) {
          row.style.display = "";
          const kInput = document.getElementById(`k${i}`);
          const aInput = document.getElementById(`a${i}`);
          const kRaw = kInput.value;
          const aRaw = aInput.value;

          if (kRaw !== "" || aRaw !== "") {
            const k = Number(kRaw);
            const a = Number(aRaw);
            const p = k * 2 + a;
            countedRounds++;
            totalKills += k;
            totalAssists += a;
            totalPoints += p;
            document.getElementById(`p${i}`).innerText = p;
            document.getElementById(`r${i}`).innerText = getRating(p);
            killsData.push(k);
            assistsData.push(a);
            pointsData.push(p);
            labels.push(`R${i+1}`);
          } else {
            document.getElementById(`p${i}`).innerText = "-";
            document.getElementById(`r${i}`).innerText = "Not Played";
          }
        } else {
          row.style.display = "none";
        }
      }

      const avgPoints = countedRounds ? (totalPoints / countedRounds).toFixed(2) : 0;
      const avgKills = countedRounds ? (totalKills / countedRounds).toFixed(2) : 0;
      const avgAssists = countedRounds ? (totalAssists / countedRounds).toFixed(2) : 0;
      const overall = getRating(parseFloat(avgPoints));

      document.getElementById("summary").innerText = `Total Kills: ${totalKills} | Total Assists: ${totalAssists} | Total Points: ${totalPoints} | Avg Kills/Round: ${avgKills} | Avg Assists/Round: ${avgAssists} | Avg Points/Round: ${avgPoints} â†’ Overall Rating: ${overall}`;

      if (roundChart) roundChart.destroy();
      const ctx = document.getElementById("roundChart").getContext("2d");
      roundChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [
            { label: 'Kills', data: killsData, borderColor: '#00ff99', fill: false },
            { label: 'Assists', data: assistsData, borderColor: '#0099ff', fill: false },
            { label: 'Points', data: pointsData, borderColor: '#ff33cc', fill: false }
          ]
        },
        options: {
          responsive: true,
          plugins: { legend: { labels: { color: '#eee' } } },
          scales: {
            x: { ticks: { color: '#eee' } },
            y: { ticks: { color: '#eee' } }
          }
        }
      });
    }

    function toggleChart() {
      const chart = document.getElementById("chartContainer");
      chart.style.display = chart.style.display === "none" ? "block" : "none";
    }

    // Other unchanged functions below (resetMatch, saveMatch, loadOrNewMatch, updateSavedList, deleteMatch, renameMatch)
    // ... [omitted here for brevity but will remain in your current version] ...
  </script></body>
</html>
